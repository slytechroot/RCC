8.8 Using grep to Search Multiple Files

The grep command can search multiple files if a glob character is used for the file names. Keep in mind that the grep command cannot search a file that the user does not have privileges to read. The following command will search all of the files in the current directory for the Linux pattern:

sysadmin@localhost:~/Documents$ grep 'Linux' ./*
grep: ./School: Is a directory
grep: ./Work: Is a directory
./linux.txt:Linux       is      growing !
./linux.txt:Linux   is      growing !
./linux.txt:Linux       is      growing !
./linux.txt:Linux       is      growing !
./os.csv:1991,Linux,Torvalds
./words:Linux
./words:Linux's

Rather than displaying every line in every file that matches the pattern, it may be preferable to see a list of the file names that have at least one line that matches the pattern. The -l option will list file names that contain matches, rather than the matches themselves:

sysadmin@localhost:~/Documents$ grep -l 'Linux' ./*
grep: ./School: Is a directory
grep: ./Work: Is a directory
./linux.txt
./os.csv
./words

Using the -r option will allow for directory searches to be recursive, rather than just the files in the current directory. Often, this option is used in conjunction with the -l option:

sysadmin@localhost:~/Documents$ grep -rl 'rare' /etc/*
grep: /etc/bind/rndc.key: Permission denied
grep: /etc/gshadow: Permission denied
grep: /etc/gshadow-: Permission denied
grep: /etc/security/opasswd: Permission denied
grep: /etc/shadow: Permission denied
grep: /etc/shadow-: Permission denied
/etc/skel/.bashrc
grep: /etc/ssh/ssh_host_ecdsa_key: Permission denied
grep: /etc/ssh/ssh_host_ed25519_key: Permission denied
grep: /etc/ssh/ssh_host_rsa_key: Permission denied
grep: /etc/ssl/private: Permission denied
grep: /etc/sudoers: Permission denied
grep: /etc/sudoers.d/README: Permission denied

Note

The errors above are generated by directories the user does not have permission to view. It is possible to eliminate this error output from the terminal by redirecting the standard error.

Redirection will be explained in greater detail later in this course.

