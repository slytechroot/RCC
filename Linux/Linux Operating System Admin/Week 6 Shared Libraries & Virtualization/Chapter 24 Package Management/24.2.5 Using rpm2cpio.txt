24.2.5 Using rpm2cpio

The rpm2cpio command accepts an .rpm file as an argument (or reads data that is in a package format from standard input) and outputs a cpio archive. This capability can be used to list the contents of an .rpm file or to extract one or more files from within the original .rpm file.

For example, to list the contents of the telnet-server-0.17-47.el6_3.1.i686.rpm file, execute the following command. The output shows the files contained within the .rpm file and the total number of 512KiB blocks that those files would use if extracted:

[sysadmin@localhost ~]$ rpm2cpio telnet-server-0.17-47.el6_3.1.i686.rpm | cpio -t
./etc/xinetd.d/telnet
./usr/sbin/in.telnetd
./usr/share/man/man5/issue.net.5.gz
./usr/share/man/man8/in.telnetd.8.gz
./usr/share/man/man8/telnetd.8.gz
108 blocks

To copy these files from the .rpm file, use the following command to extract these files to the current directory:

[sysadmin@localhost ~]$ rpm2cpio telnet-server-0.17-47.el6_3.1.i686.rpm | cpio -imud

Several options for the cpio command are listed in the table below.
Option 	Purpose
-i 	Extract
-m 	Retain the original modification times on the files
-u 	Unconditionally replace any existing files
-d 	Create any parent directories of the files contained within the archive

Note

Recall that the cpio command is an archive command that can merge many files into a single file.

The cpio command is covered in greater detail earlier in the course.

Consider This

Why use the rpm2cpio command? Consider a situation where a key package file is accidentally removed from the system. Reinstalling the entire package may be overkill if only a single file is needed. Using the rpm2cpio command, the file that is missing can be extracted and copied back into the appropriate directory.

